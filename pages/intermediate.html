<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SQL Tutor - Aprenda SQL de Forma Interativa</title>
    <link rel="stylesheet" href="../styles.css">
</head>
<body>
    <header>
        <div class="container header-container">
            <div class="logo">SQL Tutor</div>
            <button class="nav-toggle" aria-label="Abrir menu">☰</button>
            <nav id="main-nav">
                <ul>
                    <li><a href="../index.html" class="nav-link">Home</a></li>
                    <li><a href="basic.html" class="nav-link">Básico</a></li>
                    <li><a href="intermediate.html" class="nav-link active">Intermediário</a></li>
                    <li><a href="joins.html" class="nav-link">JOINS</a></li>
                    <!-- <li><a href="playground.html" class="nav-link">Playground</a></li> -->
                    <li><a href="exercise.html" class="nav-link">Exercícios</a></li>
                    <li><a href="advanced.html" class="nav-link">Avançado</a></li>
                    <li><a href="cheat-sheet.html" class="nav-link">Cheat Sheet</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main>
        <div class="container">
            <h1>SQL Intermediário</h1>
            <p>Avançando além do básico, estes conceitos permitirão que você execute consultas mais complexas e poderosas, extraindo informações valiosas dos seus dados.</p>
            
            <h2>ORDER BY</h2>
            <p>A cláusula <strong>ORDER BY</strong> é usada para classificar o conjunto de resultados em ordem crescente (ASC) ou decrescente (DESC).</p>
            
            <div class="code-block">
                <button class="copy-btn" onclick="copyCode(this)">Copiar</button>
                <pre><code><span class="sql-keyword">SELECT</span> * <span class="sql-keyword">FROM</span> Alunos 
<span class="sql-keyword">ORDER BY</span> nome <span class="sql-keyword">ASC</span>;</code></pre>
            </div>
            
            <p>Para ordenar por múltiplas colunas (útil quando há valores repetidos na primeira coluna):</p>
            
            <div class="code-block">
                <button class="copy-btn" onclick="copyCode(this)">Copiar</button>
                <pre><code><span class="sql-keyword">SELECT</span> * <span class="sql-keyword">FROM</span> Alunos 
<span class="sql-keyword">ORDER BY</span> curso_id <span class="sql-keyword">ASC</span>, idade <span class="sql-keyword">DESC</span>;</code></pre>
            </div>
            
            <div class="alert alert-info">
                <strong>Dica:</strong> ASC (ascendente) é o padrão e pode ser omitido. Use DESC para ordem descendente.
            </div>
            
            <h2>LIMIT e OFFSET</h2>
            <p><strong>LIMIT</strong> é usado para especificar o número máximo de registros a retornar. <strong>OFFSET</strong> especifica quantos registros pular antes de começar a retornar.</p>
            
            <div class="code-block">
                <button class="copy-btn" onclick="copyCode(this)">Copiar</button>
                <pre><code><span class="sql-keyword">SELECT</span> * <span class="sql-keyword">FROM</span> Alunos 
<span class="sql-keyword">LIMIT</span> 5 <span class="sql-keyword">OFFSET</span> 10;</code></pre>
            </div>
            
            <div class="alert alert-info">
                <strong>Uso prático:</strong> LIMIT e OFFSET são frequentemente usados para implementar paginação em aplicações, mostrando um número fixo de resultados por página.
            </div>
            
            <h2>Funções de Agregação</h2>
            <p>Funções de agregação realizam um cálculo em um conjunto de valores e retornam um único valor. São essenciais para análise de dados.</p>
            
            <div class="code-block">
                <button class="copy-btn" onclick="copyCode(this)">Copiar</button>
                <pre><code><span class="sql-keyword">SELECT</span> 
<span class="sql-keyword">COUNT</span>(*) <span class="sql-keyword">AS</span> total_alunos,
<span class="sql-keyword">AVG</span>(idade) <span class="sql-keyword">AS</span> media_idade,
<span class="sql-keyword">MIN</span>(idade) <span class="sql-keyword">AS</span> idade_minima,
<span class="sql-keyword">MAX</span>(idade) <span class="sql-keyword">AS</span> idade_maxima,
<span class="sql-keyword">SUM</span>(idade) <span class="sql-keyword">AS</span> soma_idades
<span class="sql-keyword">FROM</span> Alunos;</code></pre>
            </div>
            
            <p>Principais funções de agregação:</p>
            <ul>
                <li><strong>COUNT()</strong> - Conta o número de registros</li>
                <li><strong>SUM()</strong> - Soma os valores de uma coluna</li>
                <li><strong>AVG()</strong> - Calcula a média dos valores</li>
                <li><strong>MIN()</strong> - Encontra o valor mínimo</li>
                <li><strong>MAX()</strong> - Encontra o valor máximo</li>
            </ul>
            
            <h2>GROUP BY</h2>
            <p>A cláusula <strong>GROUP BY</strong> agrupa linhas que têm os mesmos valores em colunas especificadas. É frequentemente usada com funções de agregação.</p>
            
            <div class="code-block">
                <button class="copy-btn" onclick="copyCode(this)">Copiar</button>
                <pre><code><span class="sql-keyword">SELECT</span> curso_id, <span class="sql-keyword">COUNT</span>(*) <span class="sql-keyword">AS</span> total 
<span class="sql-keyword">FROM</span> Alunos 
<span class="sql-keyword">GROUP BY</span> curso_id;</code></pre>
            </div>
            
            <div class="alert alert-info">
                <strong>Importante:</strong> Todas as colunas no SELECT que não são funções de agregação devem aparecer no GROUP BY.
            </div>
            
            <h2>HAVING</h2>
            <p><strong>HAVING</strong> é usado para filtrar resultados de grupos, assim como WHERE filtra registros individuais. A diferença é que HAVING funciona após o agrupamento.</p>
            
            <div class="code-block">
                <button class="copy-btn" onclick="copyCode(this)">Copiar</button>
                <pre><code><span class="sql-keyword">SELECT</span> curso_id, <span class="sql-keyword">COUNT</span>(*) <span class="sql-keyword">AS</span> total 
<span class="sql-keyword">FROM</span> Alunos 
<span class="sql-keyword">GROUP BY</span> curso_id 
<span class="sql-keyword">HAVING</span> <span class="sql-keyword">COUNT</span>(*) >= 2;</code></pre>
            </div>
            
            <div class="alert alert-info">
                <strong>Dica:</strong> Use WHERE para filtrar registros antes do agrupamento e HAVING para filtrar grupos após o agrupamento.
            </div>
            
            <h2>Subqueries</h2>
            <p>Subqueries (consultas aninhadas) são consultas dentro de outras consultas SQL. Elas permitem realizar operações complexas em etapas.</p>
            
            <div class="code-block">
                <button class="copy-btn" onclick="copyCode(this)">Copiar</button>
                <pre><code><span class="sql-keyword">SELECT</span> nome 
<span class="sql-keyword">FROM</span> Alunos 
<span class="sql-keyword">WHERE</span> curso_id <span class="sql-keyword">IN</span> (
<span class="sql-keyword">SELECT</span> id <span class="sql-keyword">FROM</span> Cursos 
<span class="sql-keyword">WHERE</span> area = 'Tecnologia'
);</code></pre>
            </div>
            
            <div class="alert alert-info">
                <strong>Uso comum:</strong> Subqueries são úteis quando você precisa filtrar com base em resultados de outra consulta, ou quando precisa calcular valores para comparação.
            </div>
            
            <!-- <div class="text-center mt-20">
                <a class="btn" href="joins.html">Próximo: JOINS →</a>
            </div> -->
        </div>
    </main>

    <footer>
        <div class="container">
            <p>Feito com ❤️ pelo professor Lucas</p>
        </div>
    </footer>

    <script src="../app.js"></script>
</body>
</html>
